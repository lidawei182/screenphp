"use strict";(self["webpackChunkdatafication"]=self["webpackChunkdatafication"]||[]).push([[154],{26776:function(e,t,a){a.d(t,{Z:function(){return c}});var n=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"inline-block"}},[t("label",{staticClass:"radio-label",staticStyle:{color:"#C0C4CC","font-size":"14px"}},[e._v("选择文件类型 : ")]),t("el-select",{staticStyle:{width:"80px"},model:{value:e.bookType,callback:function(t){e.bookType=t},expression:"bookType"}},e._l(e.options,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)},l=[],i={props:{value:{type:String,default:"xlsx"}},data(){return{options:["xlsx","csv","txt"]}},computed:{bookType:{get(){return this.value},set(e){this.$emit("input",e)}}}},s=i,o=a(1001),r=(0,o.Z)(s,n,l,!1,null,null,null),c=r.exports},67556:function(e,t,a){a.d(t,{Z:function(){return c}});var n=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"inline-block"}},[t("label",{staticClass:"radio-label",staticStyle:{"padding-left":"0",color:"#C0C4CC","font-size":"14px"}},[e._v("文件名称 : ")]),t("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入文件名称","prefix-icon":"el-icon-document"},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1)},l=[],i={props:{value:{type:String,default:""}},computed:{filename:{get(){return this.value},set(e){this.$emit("input",e)}}}},s=i,o=a(1001),r=(0,o.Z)(s,n,l,!1,null,null,null),c=r.exports},86154:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[e.showSearch?t("div",{staticClass:"filter-container"},[t("el-form",{staticClass:"form-inline",attrs:{inline:!0,model:e.listQuery}},[t("el-form-item",{attrs:{label:""}},[t("el-input",{attrs:{placeholder:"用户名",clearable:"",size:"small"},model:{value:e.listQuery.oldmanname,callback:function(t){e.$set(e.listQuery,"oldmanname",t)},expression:"listQuery.oldmanname"}})],1),t("el-form-item",{attrs:{label:""}},[t("el-input",{attrs:{placeholder:"日期",size:"small",disabled:!0},model:{value:e.todayCurrent,callback:function(t){e.todayCurrent=t},expression:"todayCurrent"}})],1),t("el-form-item",[t("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleFilter}},[e._v("搜索")])],1),t("el-form-item",[t("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"warning",icon:"el-icon-refresh",size:"small"},on:{click:e.handleFilterClear}},[e._v("重置")])],1)],1)],1):e._e(),e.showExport?t("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"20px"}},[t("FilenameOption",{staticStyle:{"margin-right":"10px"},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}}),t("BookTypeOption",{staticStyle:{"margin-right":"10px"},model:{value:e.bookType,callback:function(t){e.bookType=t},expression:"bookType"}}),t("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{loading:e.downloadLoading,type:"primary",icon:"el-icon-download"},on:{click:e.handleDownload}},[e._v("下载")])],1):e._e(),t("el-row",{staticStyle:{"margin-bottom":"10px"}},[t("el-col",{attrs:{xs:24,sm:24,lg:24}},[t("el-tooltip",{attrs:{content:"刷新",placement:"top"}},[t("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"warning",icon:"el-icon-refresh",circle:""},on:{click:e.handleFilterClear}})],1),t("el-tooltip",{attrs:{content:"搜索",placement:"top"}},[t("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-search",circle:""},on:{click:function(t){e.showSearch=!e.showSearch}}})],1),t("el-tooltip",{attrs:{content:"Export",placement:"top"}},[t("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{loading:e.downloadLoading,circle:"",type:"primary",icon:"el-icon-download"},on:{click:function(t){e.showExport=!e.showExport}}})],1),t("el-tooltip",{attrs:{content:"首页",placement:"top"}},[t("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"success",icon:"el-icon-s-home",circle:""},on:{click:e.routerPushPush}})],1)],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticClass:"headercellclassname",staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"","row-style":{backgroundColor:"#000e21"},"cell-style":{borderColor:"#000e21"},"header-cell-style":{background:"#011531",borderColor:"#000e21"},border:"",fit:""},on:{"sort-change":e.sortChange,"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{align:"center",type:"selection",width:"50"}}),t("el-table-column",{attrs:{label:"用户名","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.oldmanname))])]}}])}),t("el-table-column",{attrs:{label:"地址","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.Address))])]}}])}),t("el-table-column",{attrs:{label:"状态",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e._f("statusFilter")(a.row,e.this_)))])]}}])}),t("el-table-column",{attrs:{label:"呼叫时间",width:"160px",align:"center",prop:"calltime","class-name":e.getSortClass(),sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e._f("parseTime")(a.row.calltime,"{y}-{m}-{d} {h}:{i}:{s}")))])]}}])})],1),t("div",{staticClass:"pagination-container"},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.psize,total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},l=[],i=(a(57658),a(63822)),s=a(60555),o=a(40204),r=a(42325),c=a(67556),d=a(26776),u=a(23518),p={name:"callsList",components:{FilenameOption:c.Z,BookTypeOption:d.Z},directives:{waves:o.Z},filters:{statusFilter(e,t){let a=e.taketime,n="挂断";"呼叫"==e.status&&e.calltime&&e.taketime?n="呼叫中":"呼叫"==e.status&&e.calltime?n="呼叫":"挂断"==e.status&&""==a&&""==e.endtime?n="异常挂断":(""==a||null==a&&e.endtime||a&&"挂断"==e.status)&&(n="已处理");for(let l=0;t.list.length>l;l++)t.list[l].No==e.No&&(t.list[l].statusNo=n);return n}},computed:{...(0,i.Se)(["jdno"])},data(){return{todayCurrent:"",exportList:[],this_:this,filename:"",bookType:"xlsx",downloadLoading:!1,showExport:!1,tableKey:0,list:null,total:null,listLoading:!0,showSearch:!1,listQuery:{jdno:"",id:"",oldmanname:"",calltime:"",endcalltime:"",sort:"ASC",page:1},dateTime:"",pickerOptions:r.Pk,options:[{value:"0",label:"全部"},{value:"1",label:"沈阳",children:[{value:"shejiyuanze",label:"沈北新区",children:[{value:"yizhi",label:"小区1"},{value:"fankui",label:"小区2"}]},{value:"shejiyuanze",label:"浑南区",children:[{value:"yizhi",label:"小区1"},{value:"fankui",label:"小区2"},{value:"fankui",label:"小区3"}]}]}]}},watch:{dateTime:function(e){this.listQuery.calltime=e[0],this.listQuery.endtime=e[1]}},created(){this.fetchList()},async mounted(){this.todayCurrent=await this.GetDateStr(0),this.listQuery.calltime=await this.GetDateStr(-1),this.listQuery.endcalltime=await this.GetDateStr(1)},methods:{getSortClass:function(){let e=this.listQuery.sort;return"ASC"===e?"ascending":"descending"},sortChange(e){const{prop:t,order:a}=e;"calltime"===t&&(this.listQuery.sort="ascending"===a?"ASC":"DESC",this.handleFilter())},async GetDateStr(e){return new Promise((t=>{let a=new Date;a.setDate(a.getDate()+e);let n=a.getFullYear(),l=a.getMonth()+1,i=a.getDate();t(n+"-"+l+"-"+i)}))},handleSelectionChange(e){e.length>0?(this.exportList=[],this.exportList=e):(this.exportList=[],this.exportList=this.list)},routerPushPush(){this.$router.push({path:"/dashboard"})},fetchList(){this.listLoading=!0,this.listQuery.jdno=this.jdno,(0,s.AM)(this.listQuery).then((e=>{this.list=e.data.data,this.exportList=this.list,this.total=e.data.total,this.listLoading=!1}))},handleFilter(){this.listQuery.page=1,this.fetchList()},async handleFilterClear(){this.listQuery={page:1,psize:10,id:"",oldmanname:"",calltime:await this.GetDateStr(-1),endcalltime:await this.GetDateStr(1),endtime:"",sort:"ASC"},u.log(this.listQuery),this.dateTime="",this.fetchList()},handleSizeChange(e){this.listQuery.psize=e,this.fetchList()},handleCurrentChange(e){this.listQuery.page=e,this.fetchList()},handleChange(e){u.log(e)},handleDownload(){this.downloadLoading=!0,a.e(490).then(a.bind(a,45788)).then((e=>{const t=["用户名","地址","状态","呼叫时间"],a=["oldmanname","Address","status","calltime"],n=this.formatJson(a,this.exportList);e.export_json_to_excel({header:t,data:n,filename:this.filename,bookType:this.bookType}),this.downloadLoading=!1}))},formatJson(e,t){return t.map((t=>e.map((e=>"timestamp"===e?(0,r.TD)(t[e]):t[e]))))}}},h=p,m=a(1001),f=(0,m.Z)(h,n,l,!1,null,"6723af34",null),v=f.exports},60555:function(e,t,a){a.d(t,{AM:function(){return c},Fj:function(){return i},Tt:function(){return o},mK:function(){return p},oR:function(){return s},pj:function(){return r},s0:function(){return u},vh:function(){return l},w1:function(){return d}});var n=a(84471);function l(e){return(0,n.Z)({url:"/admin/Index/dataIntegration",method:"get",params:{data:e}})}function i(e){return(0,n.Z)({url:"/admin/Index/mapIntegration",method:"post",data:{code:e}})}function s(e){return(0,n.Z)({url:"/admin/Index/mapPositioning",method:"post",data:e})}function o(e){return(0,n.Z)({url:"/admin/Index/getMapPositioning",method:"post",data:e})}function r(e){return(0,n.Z)({url:"/admin/Index/updateMapPg",method:"post",data:e})}function c(e){return(0,n.Z)({url:"/admin/Index/dateCallsList",method:"post",data:e})}function d(e){return(0,n.Z)({url:"/admin/Index/historyCallsList",method:"post",data:e})}function u(e){return(0,n.Z)({url:"/admin/Index/getPeopleList",method:"post",data:e})}function p(e){return(0,n.Z)({url:"/admin/Index/havePeopleList",method:"post",data:e})}},40204:function(e,t,a){a.d(t,{Z:function(){return o}});const n="@@wavesContext";function l(e,t){function a(a){const n=Object.assign({},t.value),l=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),i=l.ele;if(i){i.style.position="relative",i.style.overflow="hidden";const e=i.getBoundingClientRect();let t=i.querySelector(".waves-ripple");switch(t?t.className="waves-ripple":(t=document.createElement("span"),t.className="waves-ripple",t.style.height=t.style.width=Math.max(e.width,e.height)+"px",i.appendChild(t)),l.type){case"center":t.style.top=e.height/2-t.offsetHeight/2+"px",t.style.left=e.width/2-t.offsetWidth/2+"px";break;default:t.style.top=(a.pageY-e.top-t.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",t.style.left=(a.pageX-e.left-t.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return t.style.backgroundColor=l.color,t.className="waves-ripple z-active",!1}}return e[n]?e[n].removeHandle=a:e[n]={removeHandle:a},a}var i={bind(e,t){e.addEventListener("click",l(e,t),!1)},update(e,t){e.removeEventListener("click",e[n].removeHandle,!1),e.addEventListener("click",l(e,t),!1)},unbind(e){e.removeEventListener("click",e[n].removeHandle,!1),e[n]=null,delete e[n]}};const s=function(e){e.directive("waves",i)};window.Vue&&(window.waves=i,Vue.use(s)),i.install=s;var o=i}}]);
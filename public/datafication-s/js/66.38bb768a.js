(self["webpackChunkdatafication"]=self["webpackChunkdatafication"]||[]).push([[66],{79066:function(t,i,e){"use strict";e.r(i),e.d(i,{default:function(){return u}});var s=function(){var t=this,i=t._self._c;return i("div",{staticClass:"slide-verify-container"},[i("div",{staticClass:"slide-verify-block-box"}),i("div",{staticClass:"slide-verify",style:{width:t.w},attrs:{id:"slideVerify",onselectstart:"return false;"}},[i("img",{staticClass:"photos-img",attrs:{src:t.photos}}),i("canvas",{ref:"canvas",attrs:{width:t.w,height:t.h}}),i("div",{staticClass:"slide-verify-refresh-icon",on:{click:t.refresh}}),i("canvas",{ref:"block",staticClass:"slide-verify-block",attrs:{width:t.w,height:t.h}}),i("div",{staticClass:"slide-verify-slider",class:{"container-active":t.containerActive,"container-success":t.containerSuccess,"container-fail":t.containerFail},style:{width:t.w}},[i("div",{staticClass:"slide-verify-slider-mask",style:{width:t.sliderMaskWidth}},[i("div",{staticClass:"slide-verify-slider-mask-item",style:{left:t.sliderLeft},on:{mousedown:t.sliderDown,touchstart:t.touchStartEvent,touchmove:t.touchMoveEvent,touchend:t.touchEndEvent}},[i("div",{staticClass:"slide-verify-slider-mask-item-icon"})])]),i("span",{staticClass:"slide-verify-slider-text"},[t._v(t._s(t.sliderText))])])])])},n=[];e(57658);const r=Math.PI;function o(t,i){return t+i}function c(t){return t*t}var a={name:"SlideVerify",props:{l:{type:Number,default:42},r:{type:Number,default:10},w:{type:Number,default:310},h:{type:Number,default:155},sliderText:{type:String,default:"Slide filled right"}},data(){return{photos:e(83509),containerActive:!1,containerSuccess:!1,containerFail:!1,canvasCtx:null,blockCtx:null,block:null,block_x:void 0,block_y:void 0,L:this.l+2*this.r+3,img:void 0,originX:void 0,originY:void 0,isMouseDown:!1,trail:[],sliderLeft:0,sliderMaskWidth:0}},mounted(){this.init()},methods:{init(){this.initDom(),this.initImg(),this.bindEvents()},initDom(){this.block=this.$refs.block,this.canvasCtx=this.$refs.canvas.getContext("2d"),this.blockCtx=this.block.getContext("2d")},initImg(){const t=this.createImg((()=>{this.drawBlock(),this.canvasCtx.drawImage(t,0,0,this.w,this.h),this.blockCtx.drawImage(t,0,0,this.w,this.h);let{block_x:i,block_y:e,r:s,L:n}=this,r=e-2*s-1,o=this.blockCtx.getImageData(i,r,n,n);this.block.width=n,this.blockCtx.putImageData(o,0,r)}));this.img=t},drawBlock(){this.block_x=this.getRandomNumberByRange(this.L+10,this.w-(this.L+10)),this.block_y=this.getRandomNumberByRange(10+2*this.r,this.h-(this.L+10)),this.draw(this.canvasCtx,this.block_x,this.block_y,"fill"),this.draw(this.blockCtx,this.block_x,this.block_y,"clip")},draw(t,i,e,s){let{l:n,r:o}=this;t.beginPath(),t.moveTo(i,e),t.arc(i+n/2,e-o+2,o,.72*r,2.26*r),t.lineTo(i+n,e),t.arc(i+n+o-2,e+n/2,o,1.21*r,2.78*r),t.lineTo(i+n,e+n),t.lineTo(i,e+n),t.arc(i+o-2,e+n/2,o+.4,2.76*r,1.24*r,!0),t.lineTo(i,e),t.lineWidth=2,t.fillStyle="rgba(255, 255, 255, 0.7)",t.strokeStyle="rgba(255, 255, 255, 0.7)",t.stroke(),t[s](),t.globalCompositeOperation="overlay"},createImg(t){const i=document.createElement("img");return i.crossOrigin="Anonymous",i.onload=t,i.onerror=()=>{i.src=this.getRandomImgError()},i.src=this.getRandomImg(),i},getRandomImg(){return e(66721)("./img"+this.getRandomNumberByRange(0,3)+".jpg")},getRandomImgError(){return e(59122)},getRandomNumberByRange(t,i){return Math.round(Math.random()*(i-t)+t)},refresh(){this.reset(),this.$emit("refresh")},sliderDown(t){this.originX=t.clientX,this.originY=t.clientY,this.isMouseDown=!0},touchStartEvent(t){this.originX=t.changedTouches[0].pageX,this.originY=t.changedTouches[0].pageY,this.isMouseDown=!0},bindEvents(){document.addEventListener("mousemove",(t=>{if(!this.isMouseDown)return!1;const i=t.clientX-this.originX,e=t.clientY-this.originY;if(i<0||i+38>=this.w)return!1;this.sliderLeft=i+"px";let s=(this.w-40-20)/(this.w-40)*i;this.block.style.left=s+"px",this.containerActive=!0,this.sliderMaskWidth=i+"px",this.trail.push(e)})),document.addEventListener("mouseup",(t=>{if(!this.isMouseDown)return!1;if(this.isMouseDown=!1,t.clientX===this.originX)return!1;this.containerActive=!1;const{spliced:i,TuringTest:e}=this.verify();i?e?(this.containerSuccess=!0,this.$emit("success")):(this.containerFail=!0,this.reset()):(this.containerFail=!0,this.$emit("fail"),setTimeout((()=>{this.reset()}),1e3))}))},touchMoveEvent(t){if(!this.isMouseDown)return!1;const i=t.changedTouches[0].pageX-this.originX,e=t.changedTouches[0].pageY-this.originY;if(i<0||i+38>=this.w)return!1;this.sliderLeft=i+"px";let s=(this.w-40-20)/(this.w-40)*i;this.block.style.left=s+"px",this.containerActive=!0,this.sliderMaskWidth=i+"px",this.trail.push(e)},touchEndEvent(t){if(!this.isMouseDown)return!1;if(this.isMouseDown=!1,t.changedTouches[0].pageX===this.originX)return!1;this.containerActive=!1;const{spliced:i,TuringTest:e}=this.verify();i?e?(this.containerSuccess=!0,this.$emit("success")):(this.containerFail=!0,this.reset()):(this.containerFail=!0,this.$emit("fail"),setTimeout((()=>{this.reset()}),1e3))},verify(){const t=this.trail,i=t.reduce(o)/t.length,e=t.map((t=>t-i)),s=Math.sqrt(e.map(c).reduce(o)/t.length),n=parseInt(this.block.style.left);return{spliced:Math.abs(n-this.block_x)<10,TuringTest:i!==s}},reset(){this.containerActive=!1,this.containerSuccess=!1,this.containerFail=!1,this.sliderLeft=0,this.block.style.left=0,this.sliderMaskWidth=0;let{w:t,h:i}=this;this.canvasCtx.clearRect(0,0,t,i),this.blockCtx.clearRect(0,0,t,i),this.block.width=t,this.img.src=this.getRandomImg()}}},h=a,l=e(1001),d=(0,l.Z)(h,s,n,!1,null,"5f46b47c",null),u=d.exports},66721:function(t,i,e){var s={"./img0.jpg":97107,"./img1.jpg":59122,"./img2.jpg":31324,"./img3.jpg":83599};function n(t){var i=r(t);return e(i)}function r(t){if(!e.o(s,t)){var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=r,t.exports=n,n.id=66721},97107:function(t,i,e){"use strict";t.exports=e.p+"img/img0.74daeb32.jpg"},59122:function(t,i,e){"use strict";t.exports=e.p+"img/img1.4cbb16cc.jpg"},31324:function(t,i,e){"use strict";t.exports=e.p+"img/img2.6398655d.jpg"},83599:function(t,i,e){"use strict";t.exports=e.p+"img/img3.36eb527d.jpg"},83509:function(t,i,e){"use strict";t.exports=e.p+"img/photos.38442fef.gif"}}]);
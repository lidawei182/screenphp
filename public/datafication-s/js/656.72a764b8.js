(self["webpackChunkdatafication"]=self["webpackChunkdatafication"]||[]).push([[656],{97656:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ve}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dashboard-editor-container"},[t("div",{staticClass:"datav-container-box",staticStyle:{height:"66%"}},[t("div",{staticClass:"datav-container-left"},[t("div",{staticClass:"datav-container-left-top",staticStyle:{height:"66%"}},[t("dv-border-box-1",{staticStyle:{height:"100%"},attrs:{color:["#01193b","#7c95e8"]}},[t("FrameItem",{attrs:{"call-data":e.calllist,"call-screen-style":e.screenStyle,"number-calls":e.calllistTotal}})],1)],1),t("div",{staticClass:"datav-container-left-top",staticStyle:{"margin-top":"1%"},style:{height:(e.screenStyle,"34%")},attrs:{id:"alineids"}},[t("dv-border-box-6",{staticStyle:{width:"100%",height:"100%"},attrs:{color:["#0931b5","#7c95e8"]}},[t("el-select",{staticClass:"selectDataValue",attrs:{placeholder:"请选择"},on:{change:e.optionschange},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}},e._l(e.options,(function(e){return t("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})})),1),t("div",{staticClass:"total-calls"},[e._v("总共呼叫数量"+e._s(e.calllistCount))]),t("LineDoughnut",{attrs:{"set-interval-get":e.set_interval,"style-flatcake":{},"chart-pie-data":e.callStatistics,"class-name":"alineid","class-names":"alineids"}})],1)],1)]),t("div",{staticClass:"datav-container-right"},[t("dv-border-box-8",{ref:"dvborderbox8ref",staticClass:"datav-container-right-dv-border",staticStyle:{background:"#032f63"},style:{height:(e.screenStyle,"100%")},attrs:{id:"dvborderbox8ref"}},[t("screenfull",{staticClass:"right-menu-item",on:{screenClick:function(t){return e.screenClick(t)}}}),t("MapBaidu",{ref:"MapBaiduref",staticClass:"map-baidu",attrs:{id:"MapBaiduref","map-baidu-data":e.responseData},on:{fixedPosition:e.mapbaiduv}})],1)],1)]),t("div",{staticClass:"datav-container-bottom",staticStyle:{height:"30%"}},[t("div",{staticClass:"datav-box-content-bottom",style:{height:(e.screenStyle,"100%")}},[t("dv-border-box-13",{staticStyle:{width:"20%"}},[t("div",{staticClass:"frame-item-box",attrs:{id:"alineHistogramids"}},[t("div",{staticClass:"frame-item-title-li"},[t("dv-decoration-3",{staticStyle:{width:"68px",height:"25px"}}),t("span",[e._v("年龄/性别分布")])],1),t("LineDoughnut",{attrs:{"set-interval-get":e.set_interval,"style-flatcake":{},"chart-pie-data":e.histogram,"class-name":"alineHistogramid","class-names":"alineHistogramids"}})],1)]),t("dv-border-box-13",{staticStyle:{width:"20%"}},[t("div",{staticClass:"frame-item-box"},[t("div",{staticClass:"frame-item-title-li"},[t("dv-decoration-3",{staticStyle:{width:"68px",height:"25px"}}),t("span",[e._v("居住情况")])],1),t("div",{staticClass:"marriage-amount-to"},[e._v("总计："+e._s(e.total))]),t("PieDoughnut",{attrs:{"set-interval-get":e.set_interval,"style-flatcake":{},"chart-pie-data":e.chartRefererData,"class-name":"refererid"}})],1)]),t("dv-border-box-13",{staticStyle:{width:"20%"}},[t("div",{staticClass:"frame-item-box"},[t("div",{staticClass:"frame-item-title-li"},[t("dv-decoration-1",{staticStyle:{width:"68px",height:"25px"}}),t("span",[e._v("老人类型统计")])],1),t("div",{staticClass:"marriage-amount-to"},[e._v("总计："+e._s(e.total)+"人")]),t("PieDoughnut",{attrs:{"set-interval-get":e.set_interval,"style-flatcake":{},"chart-pie-data":e.statisticsElderlyTypes,"class-name":"refererid"}})],1)]),t("dv-border-box-13",{staticStyle:{width:"20%"}},[t("div",{staticClass:"frame-item-box"},[t("div",{staticClass:"frame-item-title-li"},[t("dv-decoration-3",{staticStyle:{width:"68px",height:"25px"}}),t("span",[e._v("婚姻统计")])],1),t("div",{staticClass:"marriage-amount-to"},[e._v("总计："+e._s(e.total))]),t("PieDoughnut",{attrs:{"set-interval-get":e.set_interval,"style-flatcake":{},"chart-pie-data":e.chartDougData,"class-name":"flatcakeid"}})],1)]),t("dv-border-box-13",{staticStyle:{width:"20%"}},[t("div",{staticClass:"frame-item-box"},[t("div",{staticClass:"frame-item-title-li"},[t("dv-decoration-1",{staticStyle:{width:"68px",height:"25px"}}),t("span",[e._v("健康统计")])],1),t("div",{staticClass:"marriage-amount-to"},[e._v("总计："+e._s(e.total))]),t("div",{staticClass:"frame-look-over-li"},e._l(e.dataHealthy,(function(a,i){return t("div",{key:i,staticStyle:{"line-height":"22px"}},[0==i?t("i",{staticClass:"el-icon-star-on frame-look-over-i",staticStyle:{color:"#3683f6"}}):1==i?t("i",{staticClass:"el-icon-star-on frame-look-over-i",staticStyle:{color:"#fdcf41"}}):2==i?t("i",{staticClass:"el-icon-star-on frame-look-over-i",staticStyle:{color:"#03ae24"}}):3==i?t("i",{staticClass:"el-icon-star-on frame-look-over-i",staticStyle:{color:"#b54501"}}):e._e(),t("span",[e._v(e._s(a.name)+":")]),t("span",[e._v(e._s(a.value)+"人")])])})),0),t("dv-charts",{attrs:{option:e.healthStatistics}})],1)])],1)])])},l=[],s=(a(57658),a(63822)),n=function(){var e=this,t=e._self._c;return t("div",[t("svg-icon",{attrs:{"class-name":e.screenfullSvg,"icon-class":e.isFullscreen?"exit-fullscreen":"fullscreen"},on:{click:e.click}})],1)},r=[],o=a(82192),c=a.n(o),h={name:"ScreenFull",data(){return{isFullscreen:!1,screenfullSvg:"screenfull-svg"}},mounted(){this.init()},methods:{click(){if(!c().isEnabled)return this.$message({message:"you browser can not work",type:"warning"}),!1;c().toggle(),this.$emit("screenClick",this.isFullscreen)},init(){c().isEnabled&&c().on("change",(()=>{this.isFullscreen=c().isFullscreen}))}}},d=h,u=a(1001),m=(0,u.Z)(d,n,r,!1,null,"19004a38",null),f=m.exports;const p=["#5470c6","#91cc75","#eaaf29","#ee6666","#0caae7","#3ba272","#fc8452"];let g=[];var y={chartDougData:{color:p,title:{text:"",left:"3%",top:"7%",textStyle:{fontSize:12,color:"#ffffff",fontWeight:400}},tooltip:{trigger:"item"},legend:{orient:"vertical",textStyle:{color:"#e5e5e5"},top:"30%",right:"14%",itemHeight:10,itemWidth:10,icon:"circle"},series:[{type:"pie",radius:["30%","60%"],avoidLabelOverlap:!1,left:"-24%",bottom:"-16%",label:{show:!0,position:"inner",fontSize:10,color:"#fff",formatter:"{d}%"},emphasis:{label:{show:!0,fontSize:12,fontWeight:"bold"}},labelLine:{show:!1},data:[{value:1048,name:"未婚"},{value:735,name:"已婚"},{value:580,name:"离异"},{value:484,name:"丧偶"},{value:300,name:"未说明"}]}]},chartRefererData:{color:p,title:{text:"",left:"3%",top:"7%",textStyle:{fontSize:12,color:"#ffffff",fontWeight:400}},tooltip:{trigger:"item"},legend:{data:g,icon:"none",top:"7%",right:"6%",textStyle:{color:"rgba(255,255,255,0.9)"}},series:[{name:g,type:"pie",radius:"41%",left:"-6%",bottom:"-15%",emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 1)"}},label:{show:!0,fontSize:12,lineHeight:15,formatter(e){return e.data.name+"\n"+e.data.value+"人"}},data:[{value:148,name:"其他"},{value:735,name:"独居"},{value:180,name:"空巢"},{value:484,name:"与亲戚同居"},{value:300,name:"与子女同居"},{value:200,name:"集中居住"}]},{name:g,type:"pie",radius:"46%",left:"-6%",bottom:"-15%",emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 1)"}},label:{show:!0,position:"inner",fontSize:8,color:"#fff",formatter:"{d}%"},data:[{value:148,name:"其他"},{value:735,name:"独居"},{value:180,name:"空巢"},{value:484,name:"与亲戚同居"},{value:300,name:"与子女同居"},{value:200,name:"集中居住"}]}]},statisticsElderlyTypes:{color:["#5470c6","#a05906","#630781","#02325e","#025e3c"],title:{text:"",left:"3%",top:"7%",textStyle:{fontSize:12,color:"#ffffff",fontWeight:400}},tooltip:{trigger:"item"},legend:{orient:"vertical",textStyle:{color:"#e5e5e5"},top:"30%",right:"10%",itemHeight:10,itemWidth:10,icon:"triangle"},series:[{type:"pie",radius:["15%","85%"],center:["35%","60%"],roseType:"area",itemStyle:{borderRadius:8},label:{show:!0,position:"inner",fontSize:12,formatter(e){return e.data.value+"人"}},data:[{value:1048,name:"特困老人"},{value:735,name:"独居老人"},{value:580,name:"失婚老人"},{value:484,name:"低保老人"},{value:300,name:"其他"}]}]},healthStatistics:{series:[{center:["42%","60%"],type:"pie",data:[{name:"能力完好",value:203,radius:["40%","53%"]},{name:"轻度失能",value:65,radius:["32%","45%"]},{name:"中度失能",value:32,radius:["31%","47%"]},{name:"重度失能",value:44,radius:["31%","42%"]}],outsideLabel:{labelLineEndLength:20,formatter:"{percent}%\n{name}",style:{fill:"#fff",fontSize:12}}},{center:["42%","60%"],type:"pie",data:[{value:10,radius:["60%","63%"]}],outsideLabel:{show:!1},pieStyle:{fill:"rgba(255, 255, 255, 0.2)"}},{center:["42%","60%"],type:"pie",data:[{value:10,radius:["56%","57%"]}],outsideLabel:{show:!1},pieStyle:{fill:"rgba(255, 255, 255, 0.2)"}}],color:["#3683f6","#fdcf41","#03ae24","#b54501"]},test:()=>"test"},v={lineData:{title:{textStyle:{color:"#ffffff"},text:""},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{show:!1},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisLabel:{show:!0,color:"#ffffff",fontSize:8}}],yAxis:[{type:"value",axisLabel:{show:!0,color:"#ffffff",fontSize:6}}],series:[{name:"Direct",type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:[320,332,301,334,390,330,320]},{name:"Search Engine",type:"line",stack:"Total",label:{show:!0,color:"#fff",fontSize:6,position:"top"},areaStyle:{color:"#73c0de"},emphasis:{focus:"series"},data:[820,932,901,934,1290,1330,1320]}]},test:()=>"test"},b=a(1708),w=a.n(b);const S=["#5470c6","#fac858","#ee6666","#73c0de","#73c0de","#3ba272","#fc8452"];a(53630);let x=[],_=0,C="";_=806,C="男"+_+"人";let k=0,D=0;k=265,D="女"+k+"人",x=[C,D];var M={lineData:{color:S,title:{text:"",left:"10%",top:"3%",textStyle:{fontSize:12,color:"#ffffff",fontWeight:200}},tooltip:{trigger:"axis"},legend:{data:x,icon:"circle",top:"25px",right:"5%",textStyle:{color:"rgba(255,255,255,0.9)"}},toolbox:{show:!1},grid:{x:0,y:"30%",width:"100%",height:"60%",backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},xAxis:[{type:"category",data:["60以下","60-70","70-80","80-90","90以上"],axisLabel:{show:!0,color:"rgba(255,255,255,0.9)",fontSize:12}}],yAxis:[{type:"value",axisLabel:{show:!0,color:"rgba(255,255,255,0.9)",fontSize:12},splitLine:{show:!0,lineStyle:{color:["rgba(255,255,255,0.2)"],width:1,type:"dashed"}}}],series:[{name:C,type:"bar",label:{show:!0},emphasis:{focus:"series"},data:[200,346,80,80,100],markPoint:{data:[{type:"max",name:"Max"},{type:"min",name:"Min"}]},showBackground:!0,itemStyle:{color:new(w().graphic.LinearGradient)(0,0,0,1,[{offset:0,color:"#83bff6"},{offset:.5,color:"#188df0"},{offset:1,color:"#188df0"}])},backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"}},{name:D,type:"bar",label:{show:!0},emphasis:{focus:"series"},data:[90,10,45,40,80],markPoint:{data:[{type:"max",name:"Max"},{type:"min",name:"Min"}]},showBackground:!0,itemStyle:{color:new(w().graphic.LinearGradient)(0,0,0,1,[{offset:0,color:"#fcabab"},{offset:.5,color:"#e03737"},{offset:1,color:"#b01717"}])},backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"}}]},test:()=>"test"};const I=["#fcf91c","#d45704"];var F={lineData:{color:I,title:{text:"呼叫统计",left:"1%",top:"7.5%",textStyle:{fontSize:12,color:"#ffffff",fontWeight:200}},tooltip:{trigger:"axis"},legend:{right:"2%",top:"7%",data:["总共呼叫数量","异常挂断"],textStyle:{color:"rgba(255,255,255,0.9)"}},toolbox:{show:!1},grid:{x:38,y:"26%",width:"90%",height:"62%",backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},xAxis:[{type:"category",boundaryGap:!1,data:["0-3","3-6","6-9","9-12","12-15","15-18","18-21","21-24"],axisLabel:{show:!0,color:"rgba(255,255,255,0.9)",fontSize:10}}],yAxis:[{type:"value",axisLabel:{show:!0,color:"rgba(255,255,255,0.9)",fontSize:12},splitLine:{show:!0,lineStyle:{color:["rgba(255,255,255,0.2)"],width:1,type:"dashed"}}}],series:[{name:"总共呼叫数量",type:"line",label:{show:!0},stack:"Total",smooth:!0,areaStyle:{},emphasis:{focus:"series"},data:[30,25,112,266,90,230,110,80,90,230,110,80]},{name:"异常挂断",type:"line",stack:"Total",smooth:!0,areaStyle:{},emphasis:{focus:"series"},data:[200,110,132,226,90,300,10,80,90,230,110,80]}]},test:()=>"test"},z=function(){var e=this,t=e._self._c;return t("div",{ref:"mapContainer",attrs:{id:"mapContainer"}})},B=[],R=a(60555),H=a(23518);function P(e,t,a,i,l){this._map=i,this._point=e,this._text=t,this._overText=a,this._statushowSum=l}P.prototype=new BMap.Overlay,P.prototype.initialize=function(){let e=this._map;this._div=document.createElement("div");let t=this._div;t.style.position="absolute",t.style.zIndex=BMap.Overlay.getZIndex(this._point.lat),0==this._statushowSum?(t.style.backgroundColor="#aaa9a9",t.style.border="1px solid #a4a3a3",t.style.color="#4c4c4c"):(t.style.backgroundColor="#209b36",t.style.border="1px solid #129129",t.style.color="#fff"),t.style.padding="0 3px",t.style.lineHeight="18px",t.style.whiteSpace="nowrap",t.style.MozUserSelect="none",t.style.fontSize="12px",t.style.borderRadius="4px";let a=this._span=document.createElement("span");t.appendChild(a),a.appendChild(document.createTextNode(this._text)),this._arrow=document.createElement("div");let i=this._arrow;return i.style.background="url(./img/label.png) no-repeat",i.style.position="absolute",i.style.width="11px",i.style.height="10px",i.style.top="18px",i.style.left="10px",i.style.overflow="hidden",0==this._statushowSum?i.style.backgroundPosition="0px -48px":i.style.backgroundPosition="0px -39px",t.appendChild(i),e.getPanes().labelPane.appendChild(t),t},P.prototype.draw=function(){let e=this._map,t=e.pointToOverlayPixel(this._point);this._div.style.left=t.x-parseInt(this._arrow.style.left)+"px",this._div.style.top=t.y-30+"px"};var E={name:"MapBaidu",props:{mapBaiduData:{type:Array,required:[]},className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"100%"}},computed:{...(0,s.Se)(["jdno"])},data(){return{markerArr:[{title:"名称：沈阳中心点",point:"123.47109664, 41.68383007",address:"地址",tel:"028-123456"}],timerMapInterval:"",responseData:[],map:""}},watch:{mapBaiduData:{handler:function(){},immediate:!0,deep:!0}},created(){},destroyed(){},mounted(){this.$nextTick((()=>{this.getnative()}))},beforeDestroy(){let e=this;clearInterval(e.timerMapInterval),e.timerMapInterval=""},methods:{init(){let e=this.$refs.mapContainer,t=new BMap.Map(e),a=new BMap.Point(116.404,39.915);t.centerAndZoom(a,8)},getnative(){let e,t,a,i=this,l=this.$refs.mapContainer,s=new BMap.Geocoder,n=new BMap.LocalCity;n.get((function(n){t=n.center.lng,e=n.center.lat,a=n.name,s.getLocation(n.center,(function(){i.$emit("fixedPosition",{cityname:a,lng:t,lat:e});let s=new BMap.Map(l),n=new BMap.Point(t,e);s.centerAndZoom(n,8),i.changeMapStyle(s),s.enableScrollWheelZoom(!0);let r=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_RIGHT,type:BMAP_NAVIGATION_CONTROL_LARGE});s.addControl(r);let o=new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,isOpen:1});s.addControl(o);let c=new window.BMap.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});s.addControl(c);let h=new BMap.CityListControl;s.addControl(h),i.map=s,i.getMapIntegration(),i.timerMapInterval=setInterval((()=>{H.log("五分钟地图"),i.getMapIntegration()}),3e5)}))}))},getMapIntegration(){let e=this;(0,R.Fj)(e.jdno).then((t=>{if(1==t.status){let a=t.data.tree;for(let t=0;a.length>t;t++){let i={title:a[t].oldmanname,point:a[t].longitude1+","+a[t].latitude1,address:a[t].Address,tel:"",isonline:a[t].isonline};e.responseData[t]=i}e.markerArr=e.responseData,e.getmarkerArr(e.markerArr)}}))},getmarkerArr(e){let t=this;this.$nextTick((()=>{let a=e,i=[],l=[];for(let e=0;e<a.length;e++){let l=a[e].point.split(",")[0],s=a[e].point.split(",")[1];if(i.push({longitude:l,latitude:s}),"在线"!=a[e].isonline){let i=t.addMarkerDisconnect(new window.BMap.Point(l,s),a[e],t.map);t.addInfoWindow(i,a[e])}else{let i=t.addMarker(new window.BMap.Point(l,s),a[e],t.map);t.addInfoWindow(i,a[e])}}i.forEach((e=>{l.push(new BMap.Point(Number(e.longitude),Number(e.latitude)))}));const s=this.map.getViewport(l);this.map.centerAndZoom(s.center,s.zoom)}))},addMarker(e,t,a){let i=new BMap.Icon("./img/markers.png",new BMap.Size(23,25),{offset:new BMap.Size(10,25),imageOffset:new BMap.Size(0,-325)}),l=new BMap.Marker(e,{title:t.title,icon:i});a.addOverlay(l);let s=new P(e,t.title,t.address,a,1);return a.addOverlay(s),l},addMarkerDisconnect(e,t,a){let i=new BMap.Icon("./img/markers.png",new BMap.Size(23,25),{offset:new BMap.Size(10,25),imageOffset:new BMap.Size(0,-376)}),l=new BMap.Marker(e,{title:t.title,icon:i});a.addOverlay(l);let s=new P(e,t.title,t.address,a,0);return a.addOverlay(s),l},addInfoWindow(e,t){let a='<div style="font-weight:bold;color:#CE5521;font-size:14px">'+t.title+"</div>",i=[];i.push('<table cellspacing="0" style="table-layout:fixed;width:100%;font:12px arial,simsun,sans-serif"><tbody>'),i.push("<tr>"),i.push('<td style="vertical-align:top;line-height:16px;width:38px;white-space:nowrap;word-break:keep-all">地址:</td>'),i.push('<td style="vertical-align:top;line-height:16px">'+t.address+" </td>"),i.push("</tr>"),i.push("</tbody></table>");let l=new BMap.InfoWindow(i.join(""),{title:a,width:200}),s=function(){e.openInfoWindow(l)};return e.addEventListener("click",s),s},changeMapStyle(e){let t={features:["road","building","water","land"],style:"midnight"};e.setMapStyle(t)}}},O=E,L=(0,u.Z)(O,z,B,!1,null,null,null),A=L.exports,T=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flatcake",style:e.styleFlatcake},[t("div",{ref:e.className,style:{height:e.height},attrs:{id:e.className}})])},N=[],j=a(23518);a(53630);var W={name:"PieDoughnut",props:{styleFlatcake:{type:Object,required:!0},className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"100%"},autoResize:{type:Boolean,default:!0},chartPieData:{type:Object,required:!0},setIntervalGet:{type:Number,required:6e4}},data(){return{chartPieDatais:this.chartPieData,piemyChart:""}},watch:{chartPieData:{handler:function(e){let t=this;t.chartPieDatais=e;try{t.piemyChart.setOption&&t.piemyChart.setOption(t.chartPieDatais)}catch(a){j.log(a)}},immediate:!0,deep:!0}},created(){},destroyed(){},mounted(){let e=this;this.$nextTick((()=>{let t=this.$refs[this.className];this.piemyChart=w().init(t,null,{renderer:"canvas",useDirtyRect:!1}),this.piemyChart.setOption(this.chartPieDatais),window.addEventListener("resize",e.piemyChart.resize)}))},methods:{aroundflatcake(e){let t=this.$refs[this.className];this.piemyChart=w().init(t,null,{renderer:"canvas",useDirtyRect:!1});let a=e;a&&"object"===typeof a&&this.piemyChart.setOption(a),window.addEventListener("resize",this.piemyChart.resize)}}},Z=W,q=(0,u.Z)(Z,T,N,!1,null,null,null),V=q.exports,$=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ilencake",style:e.styleFlatcake},[t("div",{ref:e.className,style:{height:e.height},attrs:{id:e.className}})])},G=[],J=a(23518);a(53630);var Y={name:"LineDoughnut",props:{styleFlatcake:{type:Object,required:!0},className:{type:String,default:"chart"},classNames:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"100%"},autoResize:{type:Boolean,default:!0},chartPieData:{type:Object,required:!0},setIntervalGet:{type:Number,required:6e4}},data(){return{myChart:"",dom:"",chartlienDatais:this.chartPieData}},watch:{chartPieData:{handler:function(e){let t=this;t.chartlienDatais=e;try{t.myChart.setOption&&t.myChart.setOption(t.chartlienDatais)}catch(a){J.log(a)}},immediate:!0,deep:!0}},created(){},destroyed(){},mounted(){let e=this;e.$nextTick((()=>{e.dom=e.$refs[e.className],e.myChart=w().init(e.dom,null,{renderer:"canvas",useDirtyRect:!1}),e.myChart.setOption(e.chartlienDatais),window.addEventListener("resize",e.myChart.resize)}))},methods:{aroundflatcake(){let e=this.$refs[this.className],t=w().init(e,null,{renderer:"canvas",useDirtyRect:!1}),a=this.chartPieData;a&&"object"===typeof a&&t.setOption(a),window.addEventListener("resize",t.resize)}}},X=Y,U=(0,u.Z)(X,$,G,!1,null,null,null),K=U.exports,Q=function(){var e=this,t=e._self._c;return t("div",{staticClass:"frame-item-container-conter"},[t("div",{staticClass:"frame-item-text"},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("dv-decoration-6",{staticStyle:{width:"6vh",height:"2vh"}}),t("span",[e._v("报警通知")])],1),t("span",[e._v("当前呼叫 "+e._s(e.numberCallsNumber))]),t("span",{on:{click:function(t){return e.clickLink(e.routePath,e.basePath,t)}}},[t("el-link",{attrs:{type:"primary"}},[e._v("更多")])],1)]),t("div",{staticClass:"frame-item-container"},e._l(e.dataFrameItem,(function(a,i){return t("dv-border-box-2",{key:i,staticStyle:{width:"46%"},style:{height:(e.screenStyle,"7vh")},attrs:{color:["#0931b5","#7c95e8"]}},[t("alertInformation",{attrs:{"alert-information-data":a}})],1)})),1)])},ee=[],te=a(21530),ae=a.n(te),ie=a(89176),le=function(){var e=this,t=e._self._c;return t("div",{staticClass:"alert-notification-container"},[t("span",{staticClass:"alert-notification-title"},[e._v(e._s(e.alertInformationData.oldmanname))]),"无报警通知"!=e.alertInformationData.oldmanname?t("ul",{staticClass:"alert-notification-ul"},[t("li",[e._v(e._s(e.alertInformationData.Address))]),t("li",{staticClass:"alert-notification-below"},["挂断"==e.alertInformationData.status&&" "==e.alertInformationData.taketime||null==e.alertInformationData.taketime&&null==e.alertInformationData.endtime||""==e.alertInformationData.endtime?t("div",{staticClass:"alert-notification-processed"},[e._v(" 异常挂断 ")]):t("div",{staticClass:"alert-notification-processed"},[e._v(" "+e._s(e.alertInformationData.status)+" ")]),t("div",{staticClass:"alert-notification-date"},[t("div",[e._v("警报："+e._s(e.alertInformationData.calltime))])," "==e.alertInformationData.taketime||null==e.alertInformationData.taketime?t("div",[e._v(" 处理 ")]):t("div",[e._v("处理："+e._s(e.alertInformationData.taketime))])])])]):t("div",[t("dv-decoration-4",{staticStyle:{width:"10vh",height:"1vh","margin-left":"2vh"},attrs:{reverse:!0}})],1)])},se=[],ne={name:"AlertInformation",props:{alertInformationData:{type:Object,default:function(){return{}}}},data(){return{}},mounted(){},methods:{}},re=ne,oe=(0,u.Z)(re,le,se,!1,null,"6378c10a",null),ce=oe.exports,he={name:"FrameItem",components:{alertInformation:ce},props:{numberCalls:{type:Number,default:function(){return 0}},callData:{type:Array,required:[]},callScreenStyle:{type:Boolean,default:!0},className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"100%"}},data(){return{routePath:"callslist",basePath:"/call",dataFrameItem:[],dataItem:{oldmanname:"无报警通知",status:"",Address:"",calltime:"",taketime:""},screenStyle:!0,framoffsetHeight:0,numberCallsNumber:0}},watch:{callData:{handler:function(e){this.dataFrameItem=e;let t=this;t.framoffsetHeight=document.body.offsetHeight,t.framoffsetHeight>800?t.forHeight(10):t.forHeight(8)},immediate:!0,deep:!0},callScreenStyle:{handler:function(e){this.screenStyle=e},immediate:!0,deep:!0},numberCalls:{handler:function(e){this.numberCallsNumber=e},immediate:!0,deep:!0}},created(){},destroyed(){},mounted(){let e=this;e.$nextTick((()=>{e.numberCallsNumber=e.numberCalls,e.onresizeForHeight()}))},methods:{onresizeForHeight(){let e=this;e.framoffsetHeight=document.body.offsetHeight,e.framoffsetHeight>800?e.forHeight(10):e.forHeight(8),window.onresize=()=>(()=>{e.framoffsetHeight=document.body.offsetHeight,e.framoffsetHeight>800?e.forHeight(10):e.forHeight(8)})()},forHeight(e){let t=this;for(let a=0;e>a;a++)a==t.dataFrameItem.length&&a<e&&(t.dataFrameItem[a]=t.dataItem)},resolvePath(e,t){return ae().resolve(e,t)},isExternalLink(e){return(0,ie.r4)(e)},clickLink(e,t,a){if(!this.isExternalLink(e)){a.preventDefault();const i=this.resolvePath(t,e);this.$router.push(i)}}}},de=he,ue=(0,u.Z)(de,Q,ee,!1,null,null,null),me=ue.exports,fe=a(23518),pe={name:"DashboardAdmin",components:{Screenfull:f,MapBaidu:A,PieDoughnut:V,LineDoughnut:K,FrameItem:me},computed:{...(0,s.Se)(["group","jdno"])},data(){return{framoffsetHeight:0,calllistTotal:0,timerSetInterval:"",get_month:[],themoonarraylist:[],timecalllist:[],calllistCount:0,calllist:[],dataHealthy:[],responseData:[],total:0,set_interval:24e4,screenStyle:!0,pieConfig:y,lineConfig:v,histogramConfig:M,callStatisticsConfig:F,chartDougData:{},chartRefererData:{},histogram:{},callStatistics:{},statisticsElderlyTypes:{},healthStatistics:{},options:[{name:"月",value:"1"},{name:"年",value:"2"}],dateValue:"月",changingIsoverModel:["0"],changingIsover:[{value:"1",label:"沈阳",children:[{value:"shejiyuanze",label:"沈北新区",children:[{value:"yizhi",label:"小区1"},{value:"fankui",label:"小区2"}]},{value:"shejiyuanze",label:"浑南区",children:[{value:"yizhi",label:"小区1"},{value:"fankui",label:"小区2"},{value:"fankui",label:"小区3"}]}]}]}},mounted(){this.callStatistics=F.lineData,this.histogram=M.lineData,this.chartRefererData=this.pieConfig.chartRefererData,this.statisticsElderlyTypes=y.statisticsElderlyTypes,this.chartDougData=this.pieConfig.chartDougData,this.healthStatistics=y.healthStatistics,this.framoffsetHeight=document.body.offsetHeight,this.framoffsetHeight>800?(this.callStatistics.grid.height="62%",this.callStatistics.grid.y="26%",this.histogram.grid.height="60%",this.histogram.grid.y="30%",this.histogram.legend.top="25px"):(this.callStatistics.grid.height="48%",this.callStatistics.grid.y="34%",this.histogram.grid.height="45%",this.histogram.grid.y="40%",this.histogram.legend.top="35px");let e=this;e.iniIntegration(),e.timerSetInterval=setInterval((()=>{fe.log("4分钟"),e.iniIntegration()}),e.set_interval)},beforeDestroy(){let e=this;clearInterval(e.timerSetInterval),e.timerSetInterval=""},methods:{MapApiResize(){this.$nextTick((()=>{let e=document.getElementById("dvborderbox8ref"),t=document.getElementById("MapBaiduref");this.dvborderboxssize(e,t)}))},dvborderboxssize(e,t){function a(e){return window.getComputedStyle?window.getComputedStyle(e,null):e.currentStyle}let i=a(e,"width").width,l=i.indexOf("p"),s=i.substr(0,l);s-=.007*s,s+="px",t.style.width=s},iniIntegration(){let e=this,t=JSON.stringify(this.themoonarraylist);"月"==this.dateValue&&(e.themoon(),t=JSON.stringify(this.themoonarraylist)),"年"==this.dateValue&&(this.getMonthData(),t=this.get_month);let a={jdno:this.jdno,dateValue:this.dateValue,themoonarraylist:t};(0,R.vh)(JSON.stringify(a)).then((t=>{if(1==t.status){fe.log(t.data);let a=t.data.tree,i=t.data.calllist,l=t.data.calllistTotal;e.calllist=i,e.calllistTotal=l;let s=t.data.themoonCount,n=t.data.themoonAbnormal,r=[],o=[];e.calllistCount=0;for(let t=0;s.length>t;t++)r.push(s[t].counts),e.calllistCount+=s[t].counts;for(let e=0;n.length>e;e++)o.push(n[e].counts);e.callStatistics.series[0].data=r,e.callStatistics.series[1].data=o,e.total=a.length,e.setarrayResidence(a)}}))},themoon(){let e=new Array(31).fill(0).map(((e,t)=>new Date((new Date).getTime()-864e5*t).toLocaleDateString().replace(/,/g,"-"))).reverse(),t=[],a=[],i=[],l=[],s=[],n=[],r=[],o=[];for(let v=0;e.length>v;v++)v<4&&t.push(e[v]),v>=4&&v<8&&a.push(e[v]),v>=8&&v<12&&i.push(e[v]),v>=12&&v<16&&l.push(e[v]),v>=16&&v<20&&s.push(e[v]),v>=20&&v<24&&n.push(e[v]),v>=24&&v<28&&r.push(e[v]),v>=28&&v<32&&o.push(e[v]);let c=t[0].slice(5,9)+"至"+t[t.length-1].slice(5,9),h=a[0].slice(5,9)+"至"+a[a.length-1].slice(5,9),d=i[0].slice(5,9)+"至"+i[i.length-1].slice(5,9),u=l[0].slice(5,9)+"至"+l[l.length-1].slice(5,9),m=s[0].slice(5,9)+"至"+s[s.length-1].slice(5,9),f=n[0].slice(5,9)+"至"+n[n.length-1].slice(5,9),p=r[0].slice(5,9)+"至"+r[r.length-1].slice(5,9),g=o[0].slice(5,9)+"至"+o[o.length-1].slice(5,9),y=[[t[0],t[t.length-1]],[a[0],a[a.length-1]],[i[0],i[i.length-1]],[l[0],l[l.length-1]],[s[0],s[s.length-1]],[n[0],n[n.length-1]],[r[0],r[r.length-1]],[o[0],o[o.length-1]]];this.callStatistics.xAxis[0].data=[c,h,d,u,m,f,p,g],this.themoonarraylist=y,fe.log(this.themoonarraylist)},getMonthData(){let e=this.getMonth(),t=[],a=[],i=[],l=[],s=[],n=[],r=[],o=[],c=[],h=[],d=[],u=[];for(let v=0;e.length>v;v++)v<2&&t.push(e[v]),v>=1&&v<3&&a.push(e[v]),v>=2&&v<4&&i.push(e[v]),v>=3&&v<5&&l.push(e[v]),v>=4&&v<6&&s.push(e[v]),v>=5&&v<7&&n.push(e[v]),v>=6&&v<8&&r.push(e[v]),v>=7&&v<9&&o.push(e[v]),v>=8&&v<10&&c.push(e[v]),v>=9&&v<11&&h.push(e[v]),v>=10&&v<12&&d.push(e[v]),v>=11&&v<13&&u.push(e[v]);let m=new Date((new Date).getTime()+2592e6),f=m.getFullYear(),p=m.getMonth()+1;p=p<10?"0"+p:p;let g=f+"-"+p;u.push(g);let y=[t,a,i,l,s,n,r,o,c,h,d,u];this.callStatistics.xAxis[0].data=e,this.get_month=y},getMonth(){var e=[],t=new Date;t.getFullYear();t.setMonth(t.getMonth()+1,1);for(var a=0;a<12;a++){t.setMonth(t.getMonth()-1);var i=t.getMonth()+1;i=i<10?"0"+i:i,e.push(t.getFullYear()+"-"+i)}return e.reverse()},optionschange(e){let t=this;this.dateValue=e;let a=JSON.stringify(this.themoonarraylist);"月"==this.dateValue&&(this.themoon(),a=JSON.stringify(this.themoonarraylist)),"年"==this.dateValue&&(this.getMonthData(),a=this.get_month);let i={jdno:this.jdno,dateValue:this.dateValue,themoonarraylist:a};(0,R.vh)(JSON.stringify(i)).then((e=>{if(1==e.status){fe.log(e.data);let a=e.data.themoonCount,i=e.data.themoonAbnormal,l=[],s=[];t.calllistCount=0;for(let e=0;a.length>e;e++)l.push(a[e].counts),t.calllistCount+=a[e].counts;for(let e=0;i.length>e;e++)s.push(i[e].counts);t.callStatistics.series[0].data=l,t.callStatistics.series[1].data=s}}))},GetAge(e){var t=(e+"").length;if(0==t)return 0;if(15!=t&&18!=t)return 0;var a="";18==t&&(a=e.substr(6,4)+"/"+e.substr(10,2)+"/"+e.substr(12,2)),15==t&&(a="19"+e.substr(6,2)+"/"+e.substr(8,2)+"/"+e.substr(10,2));var i=new Date(a),l=new Date,s=l.getFullYear()-i.getFullYear();return(l.getMonth()<i.getMonth()||l.getMonth()==i.getMonth()&&l.getDate()<i.getDate())&&s--,s},setarrayResidence(e){let t=this,a=[],i=[],l=[],s=[],n=[],r=[],o=[],c=[],h=[],d=[],u=[],m=[],f=[],p=[],g=[],y=[],v=[],b=[],w=[],S=[],x=[],_=[],C=[],k=[];t.responseData=[];for(let R=0;e.length>R;R++){let D={title:e[R].oldmanname,point:e[R].longitude1+","+e[R].latitude1,address:e[R].Address,tel:""};t.responseData[R]=D,"string"==typeof e[R].identity_card&&(e[R].identity_card=this.GetAge(e[R].identity_card)),"女"==e[R].sex?(a.push(e[R]),C.push(e[R].identity_card)):(i.push(e[R]),k.push(e[R].identity_card)),"==居住情况=="==e[R].Residence_state||""==e[R].Residence_state||"其他"==e[R].Residence_state||null==e[R].Residence_state||"与陪护人员居住"==e[R].Residence_state||"与配偶居住"==e[R].Residence_state?l.push(e[R].Residence_state):"独居"==e[R].Residence_state?s.push(e[R].Residence_state):"空巢"==e[R].Residence_state?n.push(e[R].Residence_state):"与亲戚同居"==e[R].Residence_state||"与亲戚朋友居住"==e[R].Residence_state||"双居"==e[R].Residence_state?r.push(e[R].Residence_state):"与子女同居"==e[R].Residence_state||"与子女长住"==e[R].Residence_state||"与子女轮流居住"==e[R].Residence_state?o.push(e[R].Residence_state):"集中居住"==e[R].Residence_state?c.push(e[R].Residence_state):l.push(e[R].Residence_state),"特困老人"==e[R].oldman_type?h.push(e[R].oldman_type):"独居老人"==e[R].oldman_type?d.push(e[R].oldman_type):"失婚老人"==e[R].oldman_type?u.push(e[R].oldman_type):"低保老人"==e[R].oldman_type?m.push(e[R].oldman_type):("其他"==e[R].oldman_type||"==老人类型=="==e[R].oldman_type||e[R].oldman_type,f.push(e[R].oldman_type)),"未婚"==e[R].marital_status?p.push(e[R].marital_status):"已婚"==e[R].marital_status?g.push(e[R].marital_status):"离异"==e[R].marital_status?y.push(e[R].marital_status):"丧偶"==e[R].marital_status?v.push(e[R].marital_status):("未说明"==e[R].marital_status||"==婚姻状态=="==e[R].marital_status||e[R].marital_status,b.push(e[R].marital_status)),"重度失能"==e[R].Healthy?_.push(e[R].Healthy):"轻度失能"==e[R].Healthy?S.push(e[R].Healthy):"中度失能"==e[R].Healthy?x.push(e[R].Healthy):(e[R].Healthy,w.push(e[R].Healthy))}let D=[{name:"其他",value:l.length?l.length:0},{name:"独居",value:s.length?s.length:0},{name:"空巢",value:n.length?n.length:0},{name:"与亲戚同居",value:r.length?r.length:0},{name:"与子女同居",value:o.length?o.length:0},{name:"集中居住",value:c.length?c.length:0}];t.chartRefererData.series[0].data=D,t.chartRefererData.series[1].data=D;let M=[{name:"特困老人",value:h.length?h.length:0},{name:"独居老人",value:d.length?d.length:0},{name:"失婚老人",value:u.length?u.length:0},{name:"低保老人",value:m.length?m.length:0},{name:"其他",value:f.length?f.length:0}];t.statisticsElderlyTypes.series[0].data=M;let I=[{name:"未婚",value:p.length?p.length:0},{name:"已婚",value:g.length?g.length:0},{name:"离异",value:y.length?y.length:0},{name:"丧偶",value:v.length?v.length:0},{name:"未说明",value:b.length?b.length:0}];t.chartDougData.series[0].data=I;let F=[{name:"能力完好",value:w.length?w.length:0,radius:["40%","53%"]},{name:"轻度失能",value:S.length?S.length:0,radius:["32%","45%"]},{name:"中度失能",value:x.length?x.length:0,radius:["31%","47%"]},{name:"重度失能",value:_.length?_.length:0,radius:["31%","42%"]}];t.dataHealthy=F,t.updateHandler(F),t.histogram.series[0].name="男"+i.length+"人",t.histogram.series[1].name="女"+a.length+"人",t.histogram.legend.data[0]="男"+i.length+"人",t.histogram.legend.data[1]="女"+a.length+"人";let z=t.maleFemale(k),B=t.maleFemale(C);t.histogram.series[0].data=z,t.histogram.series[1].data=B},maleFemale(e){let t=[],a=[],i=[],l=[],s=[];for(let n=0;e.length>n;n++)e[n]<60&&t.push(e[n]),e[n]>=60&&e[n]<=70&&a.push(e[n]),e[n]>=70&&e[n]<=80&&i.push(e[n]),e[n]>=80&&e[n]<=90&&l.push(e[n]),e[n]>90&&s.push(e[n]);return[t.length,a.length,i.length,l.length,s.length]},maxmin(e){for(var t=e[0],a=e[0],i=1;i<e.length;i++)t<e[i]&&(t=e[i]),a>e[i]&&(a=e[i]);return{max:t,min:a}},updateHandler(e){this.healthStatistics.series[0].data=e,this.healthStatistics={...this.healthStatistics}},screenClick(e){this.screenStyle=e},handleChange(e){fe.log(e)},mapbaiduv(e){this.changingIsover.push({label:"当前定位"+e.cityname,value:"0"})}}},ge=pe,ye=(0,u.Z)(ge,i,l,!1,null,"cd9b7a3c",null),ve=ye.exports},82192:function(e){
/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/
(function(){"use strict";var t="undefined"!==typeof window&&"undefined"!==typeof window.document?window.document:{},a=e.exports,i=function(){for(var e,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,l=a.length,s={};i<l;i++)if(e=a[i],e&&e[1]in t){for(i=0;i<e.length;i++)s[a[0][i]]=e[i];return s}return!1}(),l={change:i.fullscreenchange,error:i.fullscreenerror},s={request:function(e,a){return new Promise(function(l,s){var n=function(){this.off("change",n),l()}.bind(this);this.on("change",n),e=e||t.documentElement;var r=e[i.requestFullscreen](a);r instanceof Promise&&r.then(n).catch(s)}.bind(this))},exit:function(){return new Promise(function(e,a){if(this.isFullscreen){var l=function(){this.off("change",l),e()}.bind(this);this.on("change",l);var s=t[i.exitFullscreen]();s instanceof Promise&&s.then(l).catch(a)}else e()}.bind(this))},toggle:function(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,a){var i=l[e];i&&t.addEventListener(i,a,!1)},off:function(e,a){var i=l[e];i&&t.removeEventListener(i,a,!1)},raw:i};i?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(t[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[i.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[i.fullscreenEnabled])}}}),a?e.exports=s:window.screenfull=s):a?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}})()},60555:function(e,t,a){"use strict";a.d(t,{AM:function(){return n},Fj:function(){return s},s0:function(){return o},vh:function(){return l},w1:function(){return r}});var i=a(84471);function l(e){return(0,i.Z)({url:"/admin/Index/dataIntegration",method:"get",params:{data:e}})}function s(e){return(0,i.Z)({url:"/admin/Index/mapIntegration",method:"post",data:{jdno:e}})}function n(e){return(0,i.Z)({url:"/admin/Index/dateCallsList",method:"post",data:e})}function r(e){return(0,i.Z)({url:"/admin/Index/historyCallsList",method:"post",data:e})}function o(e){return(0,i.Z)({url:"/admin/Index/getPeopleList",method:"post",data:e})}}}]);